{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../_services/user.service\";\nimport * as i2 from \"../_services/user-auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\n\nfunction LoginComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4)(2, \"div\", 5)(3, \"div\", 6)(4, \"h1\");\n    i0.ɵɵtext(5, \"Login\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"h6\");\n    i0.ɵɵtext(7, \"Please enter your email & password\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"form\", 7, 8);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_div_1_Template_form_ngSubmit_8_listener() {\n      i0.ɵɵrestoreView(_r4);\n\n      const _r2 = i0.ɵɵreference(9);\n\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.login(_r2);\n    });\n    i0.ɵɵelementStart(10, \"div\", 9)(11, \"label\", 10);\n    i0.ɵɵtext(12, \"Email address\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(13, \"input\", 11);\n    i0.ɵɵelementStart(14, \"div\", 12);\n    i0.ɵɵtext(15, \"We'll never share your email with anyone else.\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 9)(17, \"label\", 13);\n    i0.ɵɵtext(18, \"Password\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(19, \"input\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\", 15)(21, \"a\", 16);\n    i0.ɵɵlistener(\"click\", function LoginComponent_div_1_Template_a_click_21_listener() {\n      i0.ɵɵrestoreView(_r4);\n\n      const _r2 = i0.ɵɵreference(9);\n\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.forgotPassword(_r2);\n    });\n    i0.ɵɵtext(22, \"Forgot Password\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"button\", 17);\n    i0.ɵɵtext(24, \"Submit\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(25, \"div\", 4)(26, \"div\", 18)(27, \"p\", 19);\n    i0.ɵɵtext(28, \"You don't have an account?\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(29, \"br\");\n    i0.ɵɵelementStart(30, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function LoginComponent_div_1_Template_button_click_30_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.showLogin = true;\n    });\n    i0.ɵɵtext(31, \"Sign Up\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(32, \"br\");\n    i0.ɵɵtext(33, \" Not Interested? \");\n    i0.ɵɵelementStart(34, \"a\", 21);\n    i0.ɵɵelement(35, \"i\", 22);\n    i0.ɵɵtext(36, \" Home \");\n    i0.ɵɵelementEnd()()()();\n  }\n}\n\nfunction LoginComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"div\", 3)(2, \"div\", 4)(3, \"div\", 24)(4, \"div\", 6)(5, \"h1\");\n    i0.ɵɵtext(6, \"Sign Up\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"h6\");\n    i0.ɵɵtext(8, \"Registration\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"form\", 7, 25);\n    i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_div_2_Template_form_ngSubmit_9_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.saveUser1();\n    });\n    i0.ɵɵelementStart(11, \"div\", 9)(12, \"label\", 26);\n    i0.ɵɵtext(13, \"Pr\\u00E9nom\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"input\", 27);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_div_2_Template_input_ngModelChange_14_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.user.prenom = $event;\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"div\", 9)(16, \"label\", 28);\n    i0.ɵɵtext(17, \"Nom\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"input\", 29);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_div_2_Template_input_ngModelChange_18_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.user.nom = $event;\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"div\", 9)(20, \"label\", 30);\n    i0.ɵɵtext(21, \"Date de naissance\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"input\", 31);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_div_2_Template_input_ngModelChange_22_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.user.dateNaissance = $event;\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"div\", 9)(24, \"label\", 32);\n    i0.ɵɵtext(25, \"Num\\u00E9ro de t\\u00E9l\\u00E9phone\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"input\", 33);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_div_2_Template_input_ngModelChange_26_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.user.numTel = $event;\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(27, \"div\", 9)(28, \"label\", 34);\n    i0.ɵɵtext(29, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"input\", 35);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_div_2_Template_input_ngModelChange_30_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.user.email = $event;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"div\", 12);\n    i0.ɵɵtext(32, \"We'll never share your email with anyone else.\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(33, \"div\", 9)(34, \"label\", 36);\n    i0.ɵɵtext(35, \"Mot De Passe\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(36, \"input\", 37);\n    i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_div_2_Template_input_ngModelChange_36_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return ctx_r15.user.motDePasse = $event;\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(37, \"button\", 38);\n    i0.ɵɵtext(38, \"Sign Up\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(39, \"div\", 4)(40, \"div\", 39)(41, \"p\", 19);\n    i0.ɵɵtext(42, \"You have an account?\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(43, \"br\");\n    i0.ɵɵelementStart(44, \"button\", 40);\n    i0.ɵɵlistener(\"click\", function LoginComponent_div_2_Template_button_click_44_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return ctx_r16.showLogin = false;\n    });\n    i0.ɵɵtext(45, \"Login\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(46, \"br\")(47, \"br\");\n    i0.ɵɵtext(48, \" Not Interested? \");\n    i0.ɵɵelementStart(49, \"a\", 21);\n    i0.ɵɵelement(50, \"i\", 22);\n    i0.ɵɵtext(51, \" home\");\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(14);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.user.prenom);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.user.nom);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.user.dateNaissance);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.user.numTel);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.user.email);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.user.motDePasse);\n  }\n}\n\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(userService, userAuthService, router) {\n      this.userService = userService;\n      this.userAuthService = userAuthService;\n      this.router = router;\n      this.showLogin = true;\n      this.user = {};\n    }\n\n    ngOnInit() {\n      this.userAuthService.showLogin$.subscribe(showLogin => {\n        this.showLogin = showLogin;\n      });\n    }\n\n    login(loginForm) {\n      this.userService.login(loginForm.value).subscribe(response => {\n        this.userAuthService.setRoles(response.user.roles);\n        this.userAuthService.setToken(response.jwtToken);\n        console.log(response);\n        const role = response.user.roles[0].nomRole;\n\n        if (role == 'ADMIN') {\n          this.router.navigate(['/dashboard']);\n        } else if (role == 'CLIENT') {\n          this.router.navigate(['/home']);\n        } else if (role == 'ORGANISATEUR') {\n          this.router.navigate(['/home']);\n        }\n      }, error => {\n        console.log(error);\n      });\n    }\n\n    saveUser1() {\n      this.userService.signup(this.user).subscribe(data => {\n        console.log(data);\n      }, error => console.log(error));\n      this.router.navigate(['/tokenform']);\n    }\n\n    forgotPassword(loginForm) {\n      // Get the email from the form\n      const email = loginForm.value.userName;\n      this.userService.forgotPassword(email).subscribe(response => {\n        // Handle success or show a notification to the user\n        console.log('Password reset email sent:', response);\n        this.router.navigate(['users/reset-password']);\n      }, error => {\n        // Handle error or show an error message to the user\n        console.error('Error sending password reset email:', error);\n      });\n    }\n\n  }\n\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.UserAuthService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 3,\n    vars: 2,\n    consts: [[\"id\", \"login\", 1, \"container\", 2, \"width\", \"100%\"], [\"class\", \"row\", \"style\", \"width: 100%;\", 4, \"ngIf\"], [\"class\", \"container\", \"id\", \"signup\", \"style\", \"width: 100%;\", 4, \"ngIf\"], [1, \"row\", 2, \"width\", \"100%\"], [1, \"col-md-6\"], [\"id\", \"left\", 1, \"card\"], [1, \"text-center\"], [3, \"ngSubmit\"], [\"loginForm\", \"ngForm\"], [1, \"mb-3\"], [\"for\", \"exampleInputEmail1\", 1, \"form-label\"], [\"type\", \"email\", \"id\", \"exampleInputEmail1\", \"ngModel\", \"\", \"name\", \"userName\", \"id\", \"userName\", 1, \"form-control\"], [\"id\", \"emailHelp\", 1, \"form-text\"], [\"for\", \"exampleInputPassword1\", 1, \"form-label\"], [\"type\", \"password\", \"id\", \"exampleInputPassword1\", \"ngModel\", \"\", \"name\", \"userPassword\", \"id\", \"userPassword\", 1, \"form-control\"], [1, \"mb-3\", \"text-center\"], [\"routerLink\", \"../users/reset-password\", 1, \"text-decoration-none\", 3, \"click\"], [\"type\", \"submit\", \"value\", \"Login\", 1, \"btn\", \"btn-primary\", \"submit\"], [\"id\", \"right\", 1, \"card\"], [2, \"font-size\", \"20px\", \"margin-top\", \"20px\"], [\"id\", \"sign1\", 3, \"click\"], [\"href\", \"home\", 1, \"nav-link\", \"smooth-scroll\", \"text-uppercase\"], [1, \"bx\", \"bx-home\"], [\"id\", \"signup\", 1, \"container\", 2, \"width\", \"100%\"], [\"id\", \"left1\", 1, \"card\"], [\"signupForm\", \"ngForm\"], [\"for\", \"prenom\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"prenom\", \"name\", \"prenom\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"nom\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"nom\", \"name\", \"nom\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"dateNaissance\", 1, \"form-label\"], [\"type\", \"date\", \"id\", \"dateNaissance\", \"name\", \"dateNaissance\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"numTel\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"numTel\", \"name\", \"numTel\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"email\", 1, \"form-label\"], [\"type\", \"email\", \"id\", \"email\", \"name\", \"email\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"motDePasse\", 1, \"form-label\"], [\"type\", \"password\", \"id\", \"motDePasse\", \"name\", \"motDePasse\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"submit1\"], [\"id\", \"right1\", 1, \"card\"], [\"id\", \"sign2\", 3, \"click\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, LoginComponent_div_1_Template, 37, 0, \"div\", 1);\n        i0.ɵɵtemplate(2, LoginComponent_div_2_Template, 52, 6, \"div\", 2);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.showLogin);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showLogin);\n      }\n    },\n    directives: [i4.NgIf, i5.ɵNgNoValidate, i5.NgControlStatusGroup, i5.NgForm, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel, i3.RouterLinkWithHref, i5.RequiredValidator, i5.NumberValueAccessor],\n    styles: [\"#login[_ngcontent-%COMP%]{width:100%;height:100vh;background:top center;background-size:cover;background-color:#fff;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;justify-content:center;align-items:center}#left[_ngcontent-%COMP%]{background-color:#8c8dd4;width:100%;height:100%;display:flex;justify-content:center;align-items:center;box-shadow:0 0 30px #00000020}#right[_ngcontent-%COMP%]{position:relative;text-align:center;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#8c8dd4}#left1[_ngcontent-%COMP%]{background-color:#8c8dd4;width:100%;height:100%;display:flex;justify-content:center;align-items:center;box-shadow:0 0 30px #00000020}#right1[_ngcontent-%COMP%]{position:relative;text-align:center;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#8c8dd4}#signup[_ngcontent-%COMP%]{width:100%;height:100vh;background:top center;background-size:cover;background-color:#fff;position:absolute;top:55%;left:50%;transform:translate(-50%,-50%);display:flex;justify-content:center;align-items:center}.submit[_ngcontent-%COMP%], .submit1[_ngcontent-%COMP%]{background-color:#1c1c6b;border:none;margin-bottom:15px;margin-left:40%}#sign1[_ngcontent-%COMP%]{background-color:#1c1c6b;border-radius:5px;color:#fff;width:150px;height:50px;font-size:20px;margin-top:-20px}#sign1[_ngcontent-%COMP%]:hover{background-color:#fff;color:#1c1c6b}#sign2[_ngcontent-%COMP%]{background-color:#1c1c6b;border-radius:5px;color:#fff;width:150px;height:50px;font-size:20px;margin-top:-20px}#sign2[_ngcontent-%COMP%]:hover{background-color:#fff;color:#1c1c6b}\"]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}